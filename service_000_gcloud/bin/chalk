#! /bin/sh

# set -x
# set -euo pipefail


source ~/.profile || \

    if [[ -z $CHALK_STATUS ]]
        then 
            PROFILE_FILE=$HOME/.profile
            LIB_RESOURCES="UTILS_LIB=/usr/src/service_000_gcloud/scripts/shell/chalk/lib
            source \$UTILS_LIB/env.sh
            source \$UTILS_LIB/utils.sh
            source \$UTILS_LIB/prompts.sh
            "

            printf "$LIB_RESOURCES" >> $PROFILE_FILE
    fi

    if [[ -z $1 ]] || [[ $1 = "help" ]]
        then 
            shift
            . $SCRIPTS/chalk/config/help.sh "$@"
            return 1
        else

            # handle gcloud commands
            if [[ $1 = "gcloud" ]]
                then 
                    shift
                    . $SCRIPTS/chalk/config/gcloud.sh "$@"
                    return 1
            fi

            # handle install commands
            if [[ $1 = "install" ]]
                then 
                    shift
                    . $SCRIPTS/chalk/config/install.sh "$@"
                    return 1
            fi

            # catch all errors
            . $SCRIPTS/chalk/config/errors.sh "$@"
            return 1
    fi
